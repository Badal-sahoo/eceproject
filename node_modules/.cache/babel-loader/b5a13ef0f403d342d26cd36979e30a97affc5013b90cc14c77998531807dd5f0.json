{"ast":null,"code":"// Ideal-but-practical model with correct 3rd-quadrant reverse behavior\nexport function calculateCurrent(voltage, diodeType, mode) {\n  var _Vf$diodeType;\n  // Forward thresholds\n  const Vf = {\n    silicon: 0.7,\n    germanium: 0.3,\n    led: 2.0,\n    zener: 0.7\n  };\n\n  // Forward slope (A/V) — sharp but finite knee\n  const Kf = 0.15;\n\n  // Reverse leakage (A), small and NEGATIVE for all non-Zener\n  const I_leak = {\n    silicon: -0.00005,\n    // -50 µA\n    germanium: -0.0002,\n    // -200 µA (Ge leaks more)\n    led: -0.000005,\n    // -5 µA\n    zener: -0.00005 // before breakdown\n  };\n\n  // Zener breakdown params (Vz negative; Kz positive)\n  const Vz = -5.6; // breakdown voltage\n  const Kz = 0.12; // A/V; sets steepness of the downward line after Vz\n\n  // ----------------- Reverse mode (3rd quadrant) -----------------\n  if (mode === \"reverse\") {\n    var _I_leak$diodeType;\n    if (diodeType === \"zener\") {\n      // Before breakdown: small negative leakage\n      if (voltage > Vz) return I_leak.zener;\n\n      // After breakdown: current becomes more negative as voltage gets more negative\n      // Example: V = -6 → V - Vz = -0.4 → I = Kz * (-0.4) = -0.048 A (downward)\n      return Kz * (voltage - Vz);\n    }\n\n    // Non-zener reverse: small negative leakage (flat line below 0 A)\n    return (_I_leak$diodeType = I_leak[diodeType]) !== null && _I_leak$diodeType !== void 0 ? _I_leak$diodeType : -0.00005;\n  }\n\n  // ----------------- Forward mode (1st quadrant) -----------------\n  const Vth = (_Vf$diodeType = Vf[diodeType]) !== null && _Vf$diodeType !== void 0 ? _Vf$diodeType : 0.7;\n  if (voltage < Vth) return 0;\n  return Kf * (voltage - Vth);\n}","map":{"version":3,"names":["calculateCurrent","voltage","diodeType","mode","_Vf$diodeType","Vf","silicon","germanium","led","zener","Kf","I_leak","Vz","Kz","_I_leak$diodeType","Vth"],"sources":["/Users/badalsahoo/eceproject/eceproject/src/utils/calculateCurrent.js"],"sourcesContent":["// Ideal-but-practical model with correct 3rd-quadrant reverse behavior\nexport function calculateCurrent(voltage, diodeType, mode) {\n  // Forward thresholds\n  const Vf = {\n    silicon: 0.7,\n    germanium: 0.3,\n    led: 2.0,\n    zener: 0.7\n  };\n\n  // Forward slope (A/V) — sharp but finite knee\n  const Kf = 0.15;\n\n  // Reverse leakage (A), small and NEGATIVE for all non-Zener\n  const I_leak = {\n    silicon: -0.00005,     // -50 µA\n    germanium: -0.0002,    // -200 µA (Ge leaks more)\n    led: -0.000005,        // -5 µA\n    zener: -0.00005        // before breakdown\n  };\n\n  // Zener breakdown params (Vz negative; Kz positive)\n  const Vz = -5.6;       // breakdown voltage\n  const Kz = 0.12;       // A/V; sets steepness of the downward line after Vz\n\n  // ----------------- Reverse mode (3rd quadrant) -----------------\n  if (mode === \"reverse\") {\n    if (diodeType === \"zener\") {\n      // Before breakdown: small negative leakage\n      if (voltage > Vz) return I_leak.zener;\n\n      // After breakdown: current becomes more negative as voltage gets more negative\n      // Example: V = -6 → V - Vz = -0.4 → I = Kz * (-0.4) = -0.048 A (downward)\n      return Kz * (voltage - Vz);\n    }\n\n    // Non-zener reverse: small negative leakage (flat line below 0 A)\n    return I_leak[diodeType] ?? -0.00005;\n  }\n\n  // ----------------- Forward mode (1st quadrant) -----------------\n  const Vth = Vf[diodeType] ?? 0.7;\n  if (voltage < Vth) return 0;\n  return Kf * (voltage - Vth);\n}\n"],"mappings":"AAAA;AACA,OAAO,SAASA,gBAAgBA,CAACC,OAAO,EAAEC,SAAS,EAAEC,IAAI,EAAE;EAAA,IAAAC,aAAA;EACzD;EACA,MAAMC,EAAE,GAAG;IACTC,OAAO,EAAE,GAAG;IACZC,SAAS,EAAE,GAAG;IACdC,GAAG,EAAE,GAAG;IACRC,KAAK,EAAE;EACT,CAAC;;EAED;EACA,MAAMC,EAAE,GAAG,IAAI;;EAEf;EACA,MAAMC,MAAM,GAAG;IACbL,OAAO,EAAE,CAAC,OAAO;IAAM;IACvBC,SAAS,EAAE,CAAC,MAAM;IAAK;IACvBC,GAAG,EAAE,CAAC,QAAQ;IAAS;IACvBC,KAAK,EAAE,CAAC,OAAO,CAAQ;EACzB,CAAC;;EAED;EACA,MAAMG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAO;EACvB,MAAMC,EAAE,GAAG,IAAI,CAAC,CAAO;;EAEvB;EACA,IAAIV,IAAI,KAAK,SAAS,EAAE;IAAA,IAAAW,iBAAA;IACtB,IAAIZ,SAAS,KAAK,OAAO,EAAE;MACzB;MACA,IAAID,OAAO,GAAGW,EAAE,EAAE,OAAOD,MAAM,CAACF,KAAK;;MAErC;MACA;MACA,OAAOI,EAAE,IAAIZ,OAAO,GAAGW,EAAE,CAAC;IAC5B;;IAEA;IACA,QAAAE,iBAAA,GAAOH,MAAM,CAACT,SAAS,CAAC,cAAAY,iBAAA,cAAAA,iBAAA,GAAI,CAAC,OAAO;EACtC;;EAEA;EACA,MAAMC,GAAG,IAAAX,aAAA,GAAGC,EAAE,CAACH,SAAS,CAAC,cAAAE,aAAA,cAAAA,aAAA,GAAI,GAAG;EAChC,IAAIH,OAAO,GAAGc,GAAG,EAAE,OAAO,CAAC;EAC3B,OAAOL,EAAE,IAAIT,OAAO,GAAGc,GAAG,CAAC;AAC7B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}